<app-header-user></app-header-user>

<div class="cart-wrapper">
  <div class="cart-container">
    <button class="back-btn" routerLink="/users">‚Üê</button>

    <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
    <div class="cart-items" *ngIf="cartItems.length > 0; else emptyCart">
      <div class="cart-item" *ngFor="let item of cartItems; let i = index">
        <img
          [src]="item.image_url || 'https://via.placeholder.com/60x60/1a1a1a/ffffff?text=NOIMG'"
          [alt]="item.title"
          class="item-image"
        />
        <div class="item-info">
          <span class="item-name">{{ item.title }}</span>
          <span class="item-price">‡∏ø{{ item.price }}</span>
          <button class="remove-btn" (click)="removeItem(item.cart_id)">
            <span class="material-icons" style="font-size: 16px; vertical-align: middle"
              >close</span
            >
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
        </div>
      </div>
      <div class="summary-section">
        <div class="left-column">
          <div class="promo-input-wrapper">
            <span class="promo-label">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</span>
            <input
              type="text"
              placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"
              class="promo-input"
              [(ngModel)]="Code"
            />
            <button class="apply-promo-btn" (click)="applyPromo()">‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î</button>
            <div class="discount-section">
              <span class="discount-label">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span>
              <span class="discount-value">{{ discountValue }}</span>
            </div>
          </div>

          <div class="total-section-stacked">
            <span class="total-label">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</span>
            <span class="total-value">{{ total }}.00</span>
          </div>
        </div>

        <div class="center-column">
          <div class="action-buttons">
            <button class="checkout-btn" (click)="checkout()">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
          </div>
        </div>
      </div>
    </div>

    <ng-template #emptyCart>
      <div style="text-align: center; color: white; margin-top: 40px; padding: 40px">
        <span style="font-size: 64px">üõí</span>
        <h3 style="margin-top: 20px; font-size: 20px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h3>
        <button
          routerLink="/users"
          style="
            margin-top: 20px;
            padding: 10px 30px;
            background: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
          "
        >
          ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏°
        </button>
      </div>
    </ng-template>
  </div>
</div>
